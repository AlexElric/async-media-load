!function(a){a.fn.asyncml=function(b){var c={responsive:!0},d=a.extend(c,b),e={youtube:/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,vimeo:/^.*vimeo\.com\/(\d+).*/},f=function(a){return a.indexOf("vimeo.com")>=0?"vimeo":"youtube"},g=function(a,b){var c=a.match(e[b]);return c&&c[1]||null},h=function(b,c,e,f,g){var h=document.createElement("img");h.onload=function(){var c=this.height*e/this.width,h=(f-c)/2,i=a(this);d.responsive?(console.log(g),i.css({margin:"-9% 0","max-width":"100%"}),"vimeo_l"==g&&i.css({margin:0}),b.addClass("video-loader"),b.wrapInner('<div class="video-play"></div>'),b.css({}).parent().css({})):(i.width(e).height(c).css({top:h+"px"}),b.addClass("video-loader"),b.wrapInner('<div class="video-play"></div>'),b.css({}).parent().css({})),b.append(i)},h.src=c},i=function(b,c,d,e){a.ajax({url:"http://vimeo.com/api/v2/video/"+c+".json",dataType:"jsonp",success:function(a){if(d>200)var c=a[0].thumbnail_large,f="vimeo_l";else var c=a[0].thumbnail_medium,f="vimeo_m";h(b,c,d,e,f)}})},j=function(b){b.preventDefault();var c="";if(c="vimeo"==b.data.provider?void 0!==b.data.color?"http://player.vimeo.com/video/"+b.data.id+"?color="+b.data.color+"&amp;title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1":"http://player.vimeo.com/video/"+b.data.id+"?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1":"http://www.youtube.com/embed/"+b.data.id+"?rel=0&amp;autoplay=1&amp;autohide=1&amp;controls=0&amp;modestbranding=1&amp;rel=0&amp;showinfo=0&amp;wmode=opaque",d.responsive)var e="height:100%;left:0;position:absolute;top:0;width:100%;",f=a('<iframe style="'+e+'" src="'+c+'" frameborder="0" allowfullscreen></iframe>');else var f=a('<iframe width="'+b.data.width+'" height="'+b.data.height+'" src="'+c+'" frameborder="0" allowfullscreen></iframe>');a(this).replaceWith(f)};return this.each(function(){var b=a(this),c=b.attr("href"),e=f(c),k=g(c,e),l=b.parent().width(),m=b.parent().height(),n=b.parent().attr("color-vid");if(0==b.children("img").length)if("vimeo"==e)i(b,k,l,m);else{var o="http://img.youtube.com/vi/"+k+"/hqdefault.jpg";h(b,o,l,m,"youtube")}else d.responsive&&(a(this).find("img").css({width:"100%"}).parent().css({}).parent().css({}),a(this).addClass("video-loader"),a(this).find("img").after('<div class="video-play"></div>'));void 0!==n&&""!==n?a(this).on("click",{width:l,height:m,id:k,provider:e,color:n},j):a(this).on("click",{width:l,height:m,id:k,provider:e},j)})}}(jQuery);